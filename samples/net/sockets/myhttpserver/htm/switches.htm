<!--#include <civetweb.h> -->
<!--#include "../src/mygpio.h" -->

<!--extern void send_ok(struct mg_connection *conn, const char* mime_type); -->

<!--int switches_handler(struct mg_connection *conn, void *cbdata) { -->
<!--send_ok(conn, "text/html");-->
<html lang="en"><head>
   <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
   <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/css/bootstrap.min.css" rel="stylesheet">
   <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/js/bootstrap.bundle.min.js"></script>
   <script src="https://code.jquery.com/jquery-3.3.1.min.js"></script>
 
   <title>Switches</title></head><body>
   <div class="container"><div class="row">
   <div class="col-sm"></div>
   <div class="col-sm">

   <input id="default_button" class="btn btn-primary m-1" value="Set all to default"/>

   <!--for (uint32_t i = 0; i < NUM_OUTPUTS; i++) {-->
      <div class="form-check form-switch">
      <!--const char * const name = get_output(i)->json_name; -->
      <!--mg_printf(conn, "<input class=\"form-check-input\" type=\"checkbox\" id=\"%s\" %s/>", name, get_output(i)->value > 0 ? "checked" : "");-->
      <!--mg_printf(conn, "<label class=\"form-check-label\" for=\"%s\">%s</label>", name, name); -->
       </div>
   <!--}-->
  
   </div>                       
   <div class="col-sm"></div>
   </div></div>
   <script>
   $(document).ready(function() {
      $(":checkbox").change(function () { 
         var id = $(this).prop("id");
         var val = $(this).prop("checked") ? 1 : 0;
         $.post("/set", `{"${id}":${val}}`); 
      });
      $("#default_button").click(function () {
         $.post("/set_default"); 
         location.reload();
      });
   });
   </script>
   </body></html>
   <!--return 200;-->
   <!--}-->